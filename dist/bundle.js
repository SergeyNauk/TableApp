!function(e){var t={};function s(n){if(t[n])return t[n].exports;var r=t[n]={i:n,l:!1,exports:{}};return e[n].call(r.exports,r,r.exports,s),r.l=!0,r.exports}s.m=e,s.c=t,s.d=function(e,t,n){s.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:n})},s.r=function(e){Object.defineProperty(e,"__esModule",{value:!0})},s.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="",s(s.s=0)}([function(e,t,s){"use strict";s.r(t);var n=class{constructor(e){this.data=e,this.renderElem=document.querySelector(".renderElem"),this.showMoreDiv=document.querySelector(".showMore"),this.addUserDiv=document.querySelector(".addUserDiv"),this.modal=document.querySelector(".modal"),this.spanId=document.querySelector(".spanId"),this.spanName=document.querySelector(".spanName"),this.spanUserName=document.querySelector(".spanUserName"),this.spanEmail=document.querySelector(".spanEmail"),this.spanCity=document.querySelector(".spanCity"),this.spanPhone=document.querySelector(".spanPhone"),this.spanWebSite=document.querySelector(".spanWebSite"),this.showSelect=document.querySelector(".showSelect")}buildTable(){this.data.etalonUsersArr.forEach(e=>{let t=`<tr>\n                                <td>${e.id}</td>\n                                <td>${e.name}</td>\n                                <td>${e.username}</td>\n                                <td>${e.email}</td>\n                                <td>\n                                    <select>\n                                        <option value="user">user</option>\n                                        <option value="admin">admin</option>\n                                        <option value="batman">batman</option>\n                                    </select>\n                                </td>\n                                <td>\n                                    <button class="belize-hole-flat-button" value="deleteBtn">delete</button>\n                                    <button class="belize-hole-flat-button more" value="moreBtn">more</button>\n                                </td>\n                                </tr>`;this.renderElem.insertAdjacentHTML("beforeend",t)})}deleteRow(e){e.remove()}showMore(e){if(this.showMoreDiv.classList.toggle("showMoreAdd"),this.modal.classList.toggle("modalAdd"),"addUser"!=e){let t=e.children[0].textContent;this.data.etalonUsersArr.forEach(e=>{e.id==t&&(this.spanId.textContent=e.id,this.spanName.textContent=e.name,this.spanUserName.textContent=e.username,this.spanEmail.textContent=e.email,this.spanCity.textContent=e.address.city,this.spanPhone.textContent=e.phone,this.spanWebSite.textContent=e.website,this.showSelect.value=e.status)})}else this.spanId.textContent="",this.spanName.textContent="",this.spanUserName.textContent="",this.spanEmail.textContent="",this.spanCity.textContent="",this.spanPhone.textContent="",this.spanWebSite.textContent="",this.showSelect.value="user"}closeModalWindow(){this.showMoreDiv.classList.toggle("showMoreAdd"),this.modal.classList.toggle("modalAdd")}showChange(e,t,s,n,r){document.querySelectorAll("tbody tr").forEach(i=>{i.children[0].textContent==this.data.idShowElem&&(i.children[0].textContent=e,i.children[1].textContent=t,i.children[2].textContent=s,i.children[3].textContent=n,i.children[4].children[0].value=r)})}errorId(e){e.textContent="id not unique !"}errorMess(e){e.textContent="field is required !"}showAddUserDiv(){this.addUserDiv.classList.toggle("newUser")}showNewUser(e,t,s,n,r){let i;switch(r){case"user":i='<option value="user" selected>user</option>\n                                    <option value="admin">admin</option>\n                                    <option value="batman">batman</option>';break;case"admin":i='<option value="user">user</option>\n                                    <option value="admin" selected>admin</option>\n                                    <option value="batman">batman</option>';break;case"batman":i='<option value="user">user</option>\n                                    <option value="admin">admin</option>\n                                    <option value="batman" selected>batman</option>'}let a=`<tr>\n                            <td>${e}</td>\n                            <td>${t}</td>\n                            <td>${s}</td>\n                            <td>${n}</td>\n                            <td> \n                                <select>\n                                   ${i} \n                                </select>\n                            </td>\n                            <td>\n                                <button class="belize-hole-flat-button" value="deleteBtn">delete</button>\n                                <button class="belize-hole-flat-button more" value="moreBtn">more</button>\n                            </td>\n                         </tr>`;this.renderElem.insertAdjacentHTML("beforeend",a)}cleanNewUserSpan(e,t,s,n,r,i,a,o){e.textContent="",t.textContent="",s.textContent="",n.textContent="",r.textContent="",i.textContent="",a.textContent="",o.value="user"}};var r=class{constructor(e,t){this.data=e,this.render=t,this.renderElem=document.querySelector(".renderElem"),this.showMoreElem=document.querySelector(".showMore"),this.addUser=document.querySelector(".addUser"),this.backBtn=document.querySelector(".backBtn"),this.saveBtn=document.querySelector(".saveBtn"),this.spanId=document.querySelector(".spanId"),this.spanName=document.querySelector(".spanName"),this.spanUserName=document.querySelector(".spanUserName"),this.spanEmail=document.querySelector(".spanEmail"),this.spanCity=document.querySelector(".spanCity"),this.spanPhone=document.querySelector(".spanPhone"),this.spanWebSite=document.querySelector(".spanWebSite"),this.showSelect=document.querySelector(".showSelect")}initApp(){fetch(this.data.url).then(e=>e.json()).then(e=>{this.data.createUsersArr(e),this.render.buildTable(),this.renderElem.addEventListener("click",e=>{this.targetElemTable(e)}),this.addUser.addEventListener("click",e=>{this.render.showMore("addUser")}),this.backBtn.addEventListener("click",()=>{this.render.closeModalWindow(),this.data.cleanUserId()}),this.saveBtn.addEventListener("click",()=>{this.validateId()})}).catch(e=>console.log("error"))}targetElemTable(e){let t=e.target.parentNode.parentNode,s=t.children[0].textContent;"deleteBtn"==e.target.value?(this.data.modifyUsersArr(s),this.render.deleteRow(t)):"moreBtn"==e.target.value?(this.render.showMore(t),this.data.setIdShowElem(s)):"user"!=e.target.value&&"admin"!=e.target.value&&"batman"!=e.target.value||this.data.setSelectField(t)}validateId(){let e=""==this.data.idShowElem?"addUser":"showMore";console.log(e,this.data.idShowElem,"validate");let t=this.spanId.textContent.trim(),s=!1;this.data.etalonUsersArr.forEach(e=>{String(e.id)==t?s=!0:e.id}),"showMore"==e?0==s||t==this.data.idShowElem?this.validateOtherDate(e):this.render.errorId(this.spanId):0==s?this.validateOtherDate(e):this.render.errorId(this.spanId)}validateOtherDate(e){let t=this.spanId.textContent.trim(),s=this.spanName.textContent.trim(),n=this.spanUserName.textContent.trim(),r=this.spanEmail.textContent.trim(),i=this.spanCity.textContent.trim(),a=this.spanPhone.textContent.trim(),o=this.spanWebSite.textContent.trim(),d=this.showSelect.value,l=!1;""!=t&&"id not unique !"!=t&&"field is required !"!=t||(l=!0,this.render.errorMess(this.spanId)),""!=s&&"field is required !"!=s||(l=!0,this.render.errorMess(this.spanName)),""!=n&&"field is required !"!=n||(l=!0,this.render.errorMess(this.spanUserName)),""!=r&&"field is required !"!=r||(l=!0,this.render.errorMess(this.spanEmail)),""!=i&&"field is required !"!=i||(l=!0,this.render.errorMess(this.spanCity)),""!=a&&"field is required !"!=a||(l=!0,this.render.errorMess(this.spanPhone)),""!=o&&"field is required !"!=o||(l=!0,this.render.errorMess(this.spanWebSite)),"showMore"==e?0==l&&(console.log(e,"show"),this.data.setChange(t,s,n,r,i,a,o,d),this.render.showChange(t,s,n,r,d),this.data.cleanUserId(),this.render.closeModalWindow()):0==l&&(console.log(e,"add"),this.data.pushUser(t,s,n,r,i,a,o,d),this.render.showNewUser(t,s,n,r,d),this.render.cleanNewUserSpan(this.spanId,this.spanName,this.spanUserName,this.spanEmail,this.spanCity,this.spanPhone,this.spanWebSite,this.showSelect),this.data.cleanUserId(),this.render.closeModalWindow())}};let i=new class{constructor(){this.url="https://jsonplaceholder.typicode.com/users",this.etalonUsersArr=[],this.idShowElem="",this.newUser={id:"",name:"",username:"",email:"",address:{city:""},phone:"",website:"",status:""}}createUsersArr(e){this.etalonUsersArr=[...e],this.setDefaultSelect()}setDefaultSelect(){this.etalonUsersArr.forEach(e=>{e.status="user"})}modifyUsersArr(e){this.etalonUsersArr.forEach((t,s)=>{t.id==e&&this.etalonUsersArr.splice(s,1)})}setIdShowElem(e){this.idShowElem=e}setChange(e,t,s,n,r,i,a,o){this.etalonUsersArr.forEach(d=>{d.id==this.idShowElem&&(d.id=e,d.name=t,d.username=s,d.email=n,d.address.city=r,d.phone=i,d.website=a,d.status=o)})}pushUser(e,t,s,n,r,i,a,o){this.newUser.id=e,this.newUser.name=t,this.newUser.username=s,this.newUser.email=n,this.newUser.address.city=r,this.newUser.phone=i,this.newUser.website=a,this.newUser.status=o,this.etalonUsersArr.push(this.newUser),console.log(this.etalonUsersArr,"push")}setSelectField(e){let t=e.children[0].textContent,s=e.children[4].children[0].value;this.etalonUsersArr.forEach(e=>{e.id==t?e.status=s:e.id})}cleanUserId(){this.idShowElem=""}};new r(i,new n(i)).initApp()}]);