!function(e){var t={};function s(n){if(t[n])return t[n].exports;var r=t[n]={i:n,l:!1,exports:{}};return e[n].call(r.exports,r,r.exports,s),r.l=!0,r.exports}s.m=e,s.c=t,s.d=function(e,t,n){s.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:n})},s.r=function(e){Object.defineProperty(e,"__esModule",{value:!0})},s.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="",s(s.s=0)}([function(e,t,s){"use strict";s.r(t);var n=class{constructor(e){this.data=e,this.renderElem=document.querySelector(".renderElem"),this.showMoreDiv=document.querySelector(".showMore"),this.addUserDiv=document.querySelector(".addUserDiv"),this.spanId=document.querySelector(".spanId"),this.spanName=document.querySelector(".spanName"),this.spanUserName=document.querySelector(".spanUserName"),this.spanEmail=document.querySelector(".spanEmail"),this.spanCity=document.querySelector(".spanCity"),this.spanPhone=document.querySelector(".spanPhone"),this.spanWebSite=document.querySelector(".spanWebSite"),this.showSelect=document.querySelector(".showSelect")}buildTable(){this.data.etalonUsersArr.forEach(e=>{let t=`<tr>\n                                <td>${e.id}</td>\n                                <td>${e.name}</td>\n                                <td>${e.username}</td>\n                                <td>${e.email}</td>\n                                <td>\n                                    <select>\n                                        <option value="user">user</option>\n                                        <option value="admin">admin</option>\n                                        <option value="batman">batman</option>\n                                    </select>\n                                </td>\n                                <td>\n                                    <button class="belize-hole-flat-button" value="deleteBtn">delete</button>\n                                    <button class="belize-hole-flat-button more" value="moreBtn">more</button>\n                                </td>\n                                </tr>`;this.renderElem.insertAdjacentHTML("beforeend",t)})}deleteRow(e){e.remove()}showMore(e){this.showMoreDiv.classList.toggle("showMoreAdd");let t=e.children[0].textContent;this.data.etalonUsersArr.forEach(e=>{e.id==t&&(this.spanId.textContent=e.id,this.spanName.textContent=e.name,this.spanUserName.textContent=e.username,this.spanEmail.textContent=e.email,this.spanCity.textContent=e.address.city,this.spanPhone.textContent=e.phone,this.spanWebSite.textContent=e.website,this.showSelect.value=e.status)})}closeModalWindow(){this.showMoreDiv.classList.toggle("showMoreAdd")}showChange(e,t,s,n,r){document.querySelectorAll("tbody tr").forEach(i=>{i.children[0].textContent==this.data.idShowElem&&(i.children[0].textContent=e,i.children[1].textContent=t,i.children[2].textContent=s,i.children[3].textContent=n,i.children[4].children[0].value=r)})}errorId(e){e.textContent="id not unique !"}errorMess(e){e.textContent="field is required !"}showAddUserDiv(){this.addUserDiv.classList.toggle("newUser")}showNewUser(e,t,s,n,r){let i;switch(r){case"user":i='<option value="user" selected>user</option>\n                                    <option value="admin">admin</option>\n                                    <option value="batman">batman</option>';break;case"admin":i='<option value="user">user</option>\n                                    <option value="admin" selected>admin</option>\n                                    <option value="batman">batman</option>';break;case"batman":i='<option value="user">user</option>\n                                    <option value="admin">admin</option>\n                                    <option value="batman" selected>batman</option>'}let d=`<tr>\n                            <td>${e}</td>\n                            <td>${t}</td>\n                            <td>${s}</td>\n                            <td>${n}</td>\n                            <td> \n                                <select>\n                                   ${i} \n                                </select>\n                            </td>\n                            <td>\n                                <button class="belize-hole-flat-button" value="deleteBtn">delete</button>\n                                <button class="belize-hole-flat-button more" value="moreBtn">more</button>\n                            </td>\n                         </tr>`;this.renderElem.insertAdjacentHTML("beforeend",d)}cleanNewUserSpan(e,t,s,n,r,i,d,a){e.textContent="",t.textContent="",s.textContent="",n.textContent="",r.textContent="",i.textContent="",d.textContent="",a.value="user"}};var r=class{constructor(e,t){this.data=e,this.render=t,this.renderElem=document.querySelector(".renderElem"),this.showMoreElem=document.querySelector(".showMore"),this.addUser=document.querySelector(".addUser"),this.saveNewUser=document.querySelector(".saveNewUser"),this.backNewUser=document.querySelector(".backNewUser"),this.spanId=document.querySelector(".spanId"),this.spanName=document.querySelector(".spanName"),this.spanUserName=document.querySelector(".spanUserName"),this.spanEmail=document.querySelector(".spanEmail"),this.spanCity=document.querySelector(".spanCity"),this.spanPhone=document.querySelector(".spanPhone"),this.spanWebSite=document.querySelector(".spanWebSite"),this.showSelect=document.querySelector(".showSelect"),this.spanIdAdd=document.querySelector(".spanIdAdd"),this.spanNameAdd=document.querySelector(".spanNameAdd"),this.spanUserNameAdd=document.querySelector(".spanUserNameAdd"),this.spanEmailAdd=document.querySelector(".spanEmailAdd"),this.spanCityAdd=document.querySelector(".spanCityAdd"),this.spanPhoneAdd=document.querySelector(".spanPhoneAdd"),this.spanWebSiteAdd=document.querySelector(".spanWebSiteAdd"),this.addSelect=document.querySelector(".addSelect")}initApp(){fetch(this.data.url).then(e=>e.json()).then(e=>{this.data.createUsersArr(e),this.render.buildTable(),this.renderElem.addEventListener("click",e=>{this.targetElemTable(e)}),this.showMoreElem.addEventListener("click",e=>{this.targetElemModalWindow(e)}),this.addUser.addEventListener("click",()=>{this.render.showAddUserDiv()}),this.saveNewUser.addEventListener("click",()=>{this.validateNewUserId()}),this.backNewUser.addEventListener("click",()=>{this.render.showAddUserDiv(),this.render.cleanNewUserSpan(this.spanIdAdd,this.spanNameAdd,this.spanUserNameAdd,this.spanEmailAdd,this.spanCityAdd,this.spanPhoneAdd,this.spanWebSiteAdd)})}).catch(e=>console.log("error"))}targetElemTable(e){let t=e.target.parentNode.parentNode,s=t.children[0].textContent;"deleteBtn"==e.target.value?(this.data.modifyUsersArr(s),this.render.deleteRow(t)):"moreBtn"==e.target.value?(this.render.showMore(t),this.data.setIdShowElem(s)):"user"!=e.target.value&&"admin"!=e.target.value&&"batman"!=e.target.value||this.data.setSelectField(t)}targetElemModalWindow(e){"backBtn"==e.target.value?this.render.closeModalWindow():"saveBtn"==e.target.value&&this.validateId()}validateId(){let e=this.spanId.textContent.trim(),t=!1;this.data.etalonUsersArr.forEach(s=>{String(s.id)==e?t=!0:s.id}),0==t?this.validateOtherDate():this.render.errorId(this.spanId)}validateOtherDate(){let e=this.spanId.textContent.trim(),t=this.spanName.textContent.trim(),s=this.spanUserName.textContent.trim(),n=this.spanEmail.textContent.trim(),r=this.spanCity.textContent.trim(),i=this.spanPhone.textContent.trim(),d=this.spanWebSite.textContent.trim(),a=this.showSelect.value,o=!1;""!=e&&"id not unique !"!=e&&"field is required !"!=e||(o=!0,this.render.errorMess(this.spanId)),""!=t&&"field is required !"!=t||(o=!0,this.render.errorMess(this.spanName)),""!=s&&"field is required !"!=s||(o=!0,this.render.errorMess(this.spanUserName)),""!=n&&"field is required !"!=n||(o=!0,this.render.errorMess(this.spanEmail)),""!=r&&"field is required !"!=r||(o=!0,this.render.errorMess(this.spanCity)),""!=i&&"field is required !"!=i||(o=!0,this.render.errorMess(this.spanPhone)),""!=d&&"field is required !"!=d||(o=!0,this.render.errorMess(this.spanWebSite)),0==o&&(this.data.setChange(e,t,s,n,r,i,d,a),this.render.showChange(e,t,s,n,a),this.render.closeModalWindow())}validateNewUserId(){let e=this.spanIdAdd.textContent.trim(),t=!1;this.data.etalonUsersArr.forEach(s=>{String(s.id)==e?t=!0:s.id}),0==t?this.validateNewUserData():this.render.errorId(this.spanIdAdd)}validateNewUserData(){let e=this.spanIdAdd.textContent.trim(),t=this.spanNameAdd.textContent.trim(),s=this.spanUserNameAdd.textContent.trim(),n=this.spanEmailAdd.textContent.trim(),r=this.spanCityAdd.textContent.trim(),i=this.spanPhoneAdd.textContent.trim(),d=this.spanWebSiteAdd.textContent.trim(),a=this.addSelect.value,o=!1;""!=e&&"id not unique !"!=e&&"field is required !"!=e||(o=!0,this.render.errorMess(this.spanIdAdd)),""!=t&&"field is required !"!=t||(o=!0,this.render.errorMess(this.spanNameAdd)),""!=s&&"field is required !"!=s||(o=!0,this.render.errorMess(this.spanUserNameAdd)),""!=n&&"field is required !"!=n||(o=!0,this.render.errorMess(this.spanEmailAdd)),""!=r&&"field is required !"!=r||(o=!0,this.render.errorMess(this.spanCityAdd)),""!=i&&"field is required !"!=i||(o=!0,this.render.errorMess(this.spanPhoneAdd)),""!=d&&"field is required !"!=d||(o=!0,this.render.errorMess(this.spanWebSiteAdd)),0==o&&(this.data.pushUser(e,t,s,n,r,i,d,a),this.render.showNewUser(e,t,s,n,a),this.render.cleanNewUserSpan(this.spanIdAdd,this.spanNameAdd,this.spanUserNameAdd,this.spanEmailAdd,this.spanCityAdd,this.spanPhoneAdd,this.spanWebSiteAdd,this.addSelect),this.render.showAddUserDiv())}};let i=new class{constructor(){this.url="https://jsonplaceholder.typicode.com/users",this.etalonUsersArr=[],this.idShowElem="",this.newUser={id:"",name:"",username:"",email:"",address:{city:""},phone:"",website:"",status:""}}createUsersArr(e){this.etalonUsersArr=[...e],this.setDefaultSelect()}setDefaultSelect(){this.etalonUsersArr.forEach(e=>{e.status="user"})}modifyUsersArr(e){this.etalonUsersArr.forEach((t,s)=>{t.id==e&&this.etalonUsersArr.splice(s,1)})}setIdShowElem(e){this.idShowElem=e}setChange(e,t,s,n,r,i,d,a){this.etalonUsersArr.forEach(o=>{o.id==this.idShowElem&&(o.id=e,o.name=t,o.username=s,o.email=n,o.address.city=r,o.phone=i,o.website=d,o.status=a)})}pushUser(e,t,s,n,r,i,d,a){this.newUser.id=e,this.newUser.name=t,this.newUser.username=s,this.newUser.email=n,this.newUser.address.city=r,this.newUser.phone=i,this.newUser.website=d,this.newUser.status=a,this.etalonUsersArr.push(this.newUser)}setSelectField(e){let t=e.children[0].textContent,s=e.children[4].children[0].value;this.etalonUsersArr.forEach(e=>{e.id==t?e.status=s:e.id})}};new r(i,new n(i)).initApp()}]);