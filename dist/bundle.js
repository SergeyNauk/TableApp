!function(e){var t={};function s(r){if(t[r])return t[r].exports;var n=t[r]={i:r,l:!1,exports:{}};return e[r].call(n.exports,n,n.exports,s),n.l=!0,n.exports}s.m=e,s.c=t,s.d=function(e,t,r){s.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:r})},s.r=function(e){Object.defineProperty(e,"__esModule",{value:!0})},s.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="",s(s.s=0)}([function(e,t,s){"use strict";s.r(t);var r=class{constructor(e){this.data=e,this.renderElem=document.querySelector(".renderElem"),this.showMoreDiv=document.querySelector(".showMore"),this.addUserDiv=document.querySelector(".addUserDiv"),this.spanId=document.querySelector(".spanId"),this.spanName=document.querySelector(".spanName"),this.spanUserName=document.querySelector(".spanUserName"),this.spanEmail=document.querySelector(".spanEmail"),this.spanCity=document.querySelector(".spanCity"),this.spanPhone=document.querySelector(".spanPhone"),this.spanWebSite=document.querySelector(".spanWebSite")}buildTable(){this.data.etalonUsersArr.forEach(e=>{let t=`<tr><td>${e.id}</td><td>${e.name}</td><td>${e.username}</td><td>${e.email}</td>\n                            <td><button class="belize-hole-flat-button" value="deleteBtn">delete</button>\n                            <button class="belize-hole-flat-button more" value="moreBtn">more</button></td></tr>`;this.renderElem.insertAdjacentHTML("beforeend",t)})}deleteRow(e){e.remove()}showMore(e){this.showMoreDiv.classList.toggle("showMoreAdd");let t=e.children[0].textContent;this.data.etalonUsersArr.forEach(e=>{e.id==t&&(this.spanId.textContent=e.id,this.spanName.textContent=e.name,this.spanUserName.textContent=e.username,this.spanEmail.textContent=e.email,this.spanCity.textContent=e.address.city,this.spanPhone.textContent=e.phone,this.spanWebSite.textContent=e.website)})}closeModalWindow(){this.showMoreDiv.classList.toggle("showMoreAdd")}showChange(e,t,s,r){document.querySelectorAll("tbody tr").forEach(n=>{n.children[0].textContent==this.data.idShowElem&&(n.children[0].textContent=e,n.children[1].textContent=t,n.children[2].textContent=s,n.children[3].textContent=r)})}errorId(e){e.textContent="id not unique !"}errorMess(e){e.textContent="field is required !"}showAddUserDiv(){this.addUserDiv.classList.toggle("newUser")}showNewUser(e,t,s,r){let n=`<tr><td>${e}</td><td>${t}</td><td>${s}</td><td>${r}</td>\n                            <td><button class="belize-hole-flat-button" value="deleteBtn">delete</button>\n                            <button class="belize-hole-flat-button more" value="moreBtn">more</button></td></tr>`;this.renderElem.insertAdjacentHTML("beforeend",n)}cleanNewUserSpan(e,t,s,r,n,i,d){e.textContent="",t.textContent="",s.textContent="",r.textContent="",n.textContent="",i.textContent="",d.textContent=""}};var n=class{constructor(e,t){this.data=e,this.render=t,this.renderElem=document.querySelector(".renderElem"),this.showMoreElem=document.querySelector(".showMore"),this.addUser=document.querySelector(".addUser"),this.saveNewUser=document.querySelector(".saveNewUser"),this.backNewUser=document.querySelector(".backNewUser"),this.spanId=document.querySelector(".spanId"),this.spanName=document.querySelector(".spanName"),this.spanUserName=document.querySelector(".spanUserName"),this.spanEmail=document.querySelector(".spanEmail"),this.spanCity=document.querySelector(".spanCity"),this.spanPhone=document.querySelector(".spanPhone"),this.spanWebSite=document.querySelector(".spanWebSite"),this.spanIdAdd=document.querySelector(".spanIdAdd"),this.spanNameAdd=document.querySelector(".spanNameAdd"),this.spanUserNameAdd=document.querySelector(".spanUserNameAdd"),this.spanEmailAdd=document.querySelector(".spanEmailAdd"),this.spanCityAdd=document.querySelector(".spanCityAdd"),this.spanPhoneAdd=document.querySelector(".spanPhoneAdd"),this.spanWebSiteAdd=document.querySelector(".spanWebSiteAdd")}initApp(){fetch(this.data.url).then(e=>e.json()).then(e=>{this.data.createUsersArr(e),this.render.buildTable(),this.renderElem.addEventListener("click",e=>{this.targetElemTable(e)}),this.showMoreElem.addEventListener("click",e=>{this.targetElemModalWindow(e)}),this.addUser.addEventListener("click",()=>{this.render.showAddUserDiv()}),this.saveNewUser.addEventListener("click",()=>{this.validateNewUserId()}),this.backNewUser.addEventListener("click",()=>{this.render.showAddUserDiv(),this.render.cleanNewUserSpan(this.spanIdAdd,this.spanNameAdd,this.spanUserNameAdd,this.spanEmailAdd,this.spanCityAdd,this.spanPhoneAdd,this.spanWebSiteAdd)})}).catch(e=>console.log("error"))}targetElemTable(e){let t=e.target.parentNode.parentNode,s=t.children[0].textContent;"deleteBtn"==e.target.value?(this.data.modifyUsersArr(s),this.render.deleteRow(t)):"moreBtn"==e.target.value&&(this.render.showMore(t),this.data.setIdShowElem(s))}targetElemModalWindow(e){"backBtn"==e.target.value?this.render.closeModalWindow():"saveBtn"==e.target.value&&this.validateId()}validateId(){let e=this.spanId.textContent.trim(),t=!1;this.data.etalonUsersArr.forEach(s=>{String(s.id)==e?t=!0:s.id}),0==t?this.validateOtherDate():this.render.errorId(this.spanId)}validateOtherDate(){let e=this.spanId.textContent.trim(),t=this.spanName.textContent.trim(),s=this.spanUserName.textContent.trim(),r=this.spanEmail.textContent.trim(),n=this.spanCity.textContent.trim(),i=this.spanPhone.textContent.trim(),d=this.spanWebSite.textContent.trim(),a=!1;""!=e&&"id not unique !"!=e&&"field is required !"!=e||(a=!0,this.render.errorMess(this.spanId)),""!=t&&"field is required !"!=t||(a=!0,this.render.errorMess(this.spanName)),""!=s&&"field is required !"!=s||(a=!0,this.render.errorMess(this.spanUserName)),""!=r&&"field is required !"!=r||(a=!0,this.render.errorMess(this.spanEmail)),""!=n&&"field is required !"!=n||(a=!0,this.render.errorMess(this.spanCity)),""!=i&&"field is required !"!=i||(a=!0,this.render.errorMess(this.spanPhone)),""!=d&&"field is required !"!=d||(a=!0,this.render.errorMess(this.spanWebSite)),0==a&&(this.data.setChange(e,t,s,r,n,i,d),this.render.showChange(e,t,s,r),this.render.closeModalWindow())}validateNewUserId(){let e=this.spanIdAdd.textContent.trim(),t=!1;this.data.etalonUsersArr.forEach(s=>{String(s.id)==e?t=!0:s.id}),0==t?this.validateNewUserData():this.render.errorId(this.spanIdAdd)}validateNewUserData(){let e=this.spanIdAdd.textContent.trim(),t=this.spanNameAdd.textContent.trim(),s=this.spanUserNameAdd.textContent.trim(),r=this.spanEmailAdd.textContent.trim(),n=this.spanCityAdd.textContent.trim(),i=this.spanPhoneAdd.textContent.trim(),d=this.spanWebSiteAdd.textContent.trim(),a=!1;""!=e&&"id not unique !"!=e&&"field is required !"!=e||(a=!0,this.render.errorMess(this.spanIdAdd)),""!=t&&"field is required !"!=t||(a=!0,this.render.errorMess(this.spanNameAdd)),""!=s&&"field is required !"!=s||(a=!0,this.render.errorMess(this.spanUserNameAdd)),""!=r&&"field is required !"!=r||(a=!0,this.render.errorMess(this.spanEmailAdd)),""!=n&&"field is required !"!=n||(a=!0,this.render.errorMess(this.spanCityAdd)),""!=i&&"field is required !"!=i||(a=!0,this.render.errorMess(this.spanPhoneAdd)),""!=d&&"field is required !"!=d||(a=!0,this.render.errorMess(this.spanWebSiteAdd)),0==a&&(this.data.pushUser(e,t,s,r,n,i,d),this.render.showNewUser(e,t,s,r),this.render.cleanNewUserSpan(this.spanIdAdd,this.spanNameAdd,this.spanUserNameAdd,this.spanEmailAdd,this.spanCityAdd,this.spanPhoneAdd,this.spanWebSiteAdd),this.render.showAddUserDiv())}};let i=new class{constructor(){this.url="https://jsonplaceholder.typicode.com/users",this.etalonUsersArr=[],this.idShowElem="",this.newUser={id:"",name:"",username:"",email:"",address:{city:""},phone:"",website:""}}createUsersArr(e){this.etalonUsersArr=[...e]}modifyUsersArr(e){this.etalonUsersArr.forEach((t,s)=>{t.id==e&&this.etalonUsersArr.splice(s,1)})}setIdShowElem(e){this.idShowElem=e}setChange(e,t,s,r,n,i,d){this.etalonUsersArr.forEach(a=>{a.id==this.idShowElem&&(a.id=e,a.name=t,a.username=s,a.email=r,a.address.city=n,a.phone=i,a.website=d)})}pushUser(e,t,s,r,n,i,d){this.newUser.id=e,this.newUser.name=t,this.newUser.username=s,this.newUser.email=r,this.newUser.address.city=n,this.newUser.phone=i,this.newUser.website=d,this.etalonUsersArr.push(this.newUser)}};new n(i,new r(i)).initApp()}]);